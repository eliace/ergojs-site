<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Documentation Source: core/core-collections.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Documentation</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="Ergo.html">Ergo</a>
						</li>
						
						<li>
							<a href="Ergo.core.html">core</a>
						</li>
						
						<li>
							<a href="Ergo.data.html">data</a>
						</li>
						
						<li>
							<a href="Ergo.events.html">events</a>
						</li>
						
						<li>
							<a href="Ergo.html.html">html</a>
						</li>
						
						<li>
							<a href="Ergo.layouts.html">layouts</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.html">widgets</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="Ergo.core.Array.html">Array</a>
						</li>
						
						<li>
							<a href="Ergo.core.Collection.html">Collection</a>
						</li>
						
						<li>
							<a href="Ergo.core.Context.html">Context</a>
						</li>
						
						<li>
							<a href="Ergo.core.DataSource.html">DataSource</a>
						</li>
						
						<li>
							<a href="Ergo.core.Layout.html">Layout</a>
						</li>
						
						<li>
							<a href="Ergo.core.Object.html">Object</a>
						</li>
						
						<li>
							<a href="Ergo.core.StateManager.html">StateManager</a>
						</li>
						
						<li>
							<a href="Ergo.core.Widget.html">Widget</a>
						</li>
						
						<li>
							<a href="Ergo.core.WidgetArray.html">WidgetArray</a>
						</li>
						
						<li>
							<a href="Ergo.data.Collection.html">Collection</a>
						</li>
						
						<li>
							<a href="Ergo.data.Object.html">Object</a>
						</li>
						
						<li>
							<a href="Ergo.events.Dispatcher.html">Dispatcher</a>
						</li>
						
						<li>
							<a href="Ergo.events.Event.html">Event</a>
						</li>
						
						<li>
							<a href="Ergo.html.Button.html">Button</a>
						</li>
						
						<li>
							<a href="Ergo.html.Iframe.html">Iframe</a>
						</li>
						
						<li>
							<a href="Ergo.html.Img.html">Img</a>
						</li>
						
						<li>
							<a href="Ergo.html.Input.html">Input</a>
						</li>
						
						<li>
							<a href="Ergo.html.Select.html">Select</a>
						</li>
						
						<li>
							<a href="Ergo.html.Textarea.html">Textarea</a>
						</li>
						
						<li>
							<a href="Ergo.html.Widget.html">Widget</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Box.html">Box</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Button.html">Button</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Check.html">Check</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Field.html">Field</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Icon.html">Icon</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Inline.html">Inline</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Link.html">Link</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.List.html">List</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.NestedList.html">NestedList</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Panel.html">Panel</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Table.html">Table</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.TableRow.html">TableRow</a>
						</li>
						
						<li>
							<a href="Ergo.widgets.Text.html">Text</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="mixins.list.html" class="dropdown-toggle" data-toggle="dropdown">Mixins<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="Ergo.Observable.html">Observable</a>
						</li>
						
						<li>
							<a href="Ergo.Statable.html">Statable</a>
						</li>
						
						<li>
							<a href="Ergo.WidgetOptions.html">WidgetOptions</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#apply_all">apply_all</a>
						</li>
						
						<li>
							<a href="global.html#clear">clear</a>
						</li>
						
						<li>
							<a href="global.html#each">each</a>
						</li>
						
						<li>
							<a href="global.html#filter">filter</a>
						</li>
						
						<li>
							<a href="global.html#find">find</a>
						</li>
						
						<li>
							<a href="global.html#find_all">find_all</a>
						</li>
						
						<li>
							<a href="global.html#get">get</a>
						</li>
						
						<li>
							<a href="global.html#has_key">has_key</a>
						</li>
						
						<li>
							<a href="global.html#includes">includes</a>
						</li>
						
						<li>
							<a href="global.html#is_empty">is_empty</a>
						</li>
						
						<li>
							<a href="global.html#key_of">key_of</a>
						</li>
						
						<li>
							<a href="global.html#keys">keys</a>
						</li>
						
						<li>
							<a href="global.html#map">map</a>
						</li>
						
						<li>
							<a href="global.html#remove">remove</a>
						</li>
						
						<li>
							<a href="global.html#remove_at">remove_at</a>
						</li>
						
						<li>
							<a href="global.html#remove_if">remove_if</a>
						</li>
						
						<li>
							<a href="global.html#set">set</a>
						</li>
						
						<li>
							<a href="global.html#size">size(1)</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: core/core-collections.js</h1>
    
    <section>
        <article>
            <pre class="sunlight-highlight-javascript ">


//------------------------------------
//
// Методы для работы с коллекциями
//
//------------------------------------





(function(){
	
	var E = Ergo;
	
	
	
	
	/**
	 * Последовательный обход каждого элемента массива или хэша
	 * 
	 * в jquery есть функция $.each, но меня не устраивает порядок аргументов в замыкании
	 * 
	 * @name Ergo.each
	 * @function
	 * @param {Object|Array} src объект, элементы которого необходимо просмотреть
	 * @param {Function} callback функция, вызываемая для каждого элемента
	 */
	E.each = function(src, callback, delegate){
		if($.isArray(src)){
			var arr = src;
			for(var i = 0; i &lt; arr.length; i++){
				if( callback.call(delegate || arr, arr[i], i) === false ) return false;
			}
		}
		else {
			var obj = src;
			for(var i in obj){
				if( callback.call(delegate || obj, obj[i], i) === false ) return false;
			}	
		}
	};
	
	/**
	 * Фильтрация (как правило приводит к уменьшению размерности)
	 * 
	 * Элемент попадает в итоговый объект
	 * 
	 * @name Ergo.filter
	 * @function
	 * @param {Object|Array} src объект, элементы которого необходимо фильтровать
	 * @param {Function} callback функция, вызываемая для каждого элемента
	 * @returns {Object|Array} отфильтрованный объект или массив, в зависимости типа src 
	 */
	E.filter = function(obj, fn){
		var result;
		if( $.isArray(obj) ) {
			result = [];
			for(var i = 0; i &lt; obj.length; i++)
				if( fn.call(obj, obj[i], i) ) result.push(obj[i]);
		}
		else {
			result = {};
			for(var i in obj)
				if( fn.call(obj, obj[i], i) ) result[i] = obj[i];			
		}
		return result;
	};
	
	
	
	/*
	 * Фильтрация ключей.
	 * 
	 * В результат попадают только индексы
	 * 
	 * @param {Object|Array} src объект, элементы которого необходимо фильтровать
	 * @param {Function} callback функция, вызываемая для каждого элемента
	 * @returns {Object|Array} отфильтрованный объект или массив, в зависимости типа src 
	 */
	E.filter_keys = function(src, fn){
		var result = [];
		if($.isArray(src)) {
			for(var i = 0; i &lt; src.length; i++)
				if(fn.call(src, src[i], i)) result.push(i);
		}
		else {
			for(var i in src)
				if(fn.call(src, src[i], i)) result.push(i);			
		}
		return result;
	};
	
	
	
	
	/**
	 * Отображение (размерность сохраняется)
	 * 
	 * @name Ergo.map
	 * @function
	 * @param {Object|Array} src коллекция
	 * @param {Function} callback функция, вызываемая для каждого элемента
	 */
	E.map = function(obj, fn) {
		var a;
		if($.isArray(obj)) {
			a = [];
			for(var i = 0; i &lt; obj.length; i++) a[i] = fn.call(obj, obj[i], i);			
		}
		else {
			a = {};
			for(var i in obj) a[i] = fn.call(obj, obj[i], i);			
		}
		return a;	
	};
	
	/**
	 * Поиск первого элемента, удовлетворяющего критерию
	 * 
	 * @name Ergo.find
	 * @function
	 * @param {Object|Array} obj коллекция
	 * @param {Function|Any} criteria критерий 
	 */
	E.find = function(obj, criteria) {
		if(!$.isFunction(criteria)){
			var x = criteria;
			criteria = function(it) { return it == x; };
		}
		if($.isArray(obj)) {
			for(var i = 0; i &lt; obj.length; i++)
				if(criteria.call(obj, obj[i], i)) return obj[i];
		}
		else {
			for(var i in obj)
				if(criteria.call(obj, obj[i], i)) return obj[i];			
		}
		
		return null;
	};
	
	
	/**
	 * Псевдоним для {@link Ergo.filter}
	 * 
	 * @name Ergo.find_all
	 * @function
	 */
	E.find_all = E.filter;
	
	
	
	/**
	 * Получение индекса (или ключа) элемента в коллекции
	 * 
	 * Если критерий не является функцией, то используется метод Ergo.eq
	 * 
	 * @name Ergo.key_of
	 * @function
	 * @param {Object|Array} obj коллекция
	 * @param {Function|Any} criteria критерий 
	 */
	E.key_of = function(obj, criteria) {
		
		if(!$.isFunction(criteria))
			criteria = E.eq.curry(criteria);
			
		if($.isArray(obj)) {
			for(var i = 0; i &lt; obj.length; i++)
				if(criteria.call(obj, obj[i], i)) return i;
		}
		else {
			for(var i in obj)
				if(criteria.call(obj, obj[i], i)) return i;			
		}
		return -1;
	};
	
	
	E.index_of = E.key_of;
	
	
	/**
	 * Вызов метода для всех элементов коллекции
	 * 
	 * Аргументы вызываемого метода передаются в виде массива
	 * 
	 * Ergo.apply_all(items, 'show', [10, 45]);
	 * 
	 * @name Ergo.apply_all
	 * @function
	 * @param {Object|Array} obj коллекция
	 * @param {String} m_name имя метода
	 * @param {Array} [args] список аргументов
	 * 
	 */
	E.apply_all = function(obj, m_name, args) {
		for(var i in obj) {
			if(obj[i][m_name]) obj[i][m_name].apply(obj[i], args || []);
		}
	};
	
	/**
	 * Вызов метода для всех элементов коллекции
	 * 
	 * Аргументы вызываемого метода начинаются с 3 аргумента
	 * 
 	 * Ergo.call_all(items, 'show', 10, 45);
	 * 
	 * @name Ergo.call_all
	 * @function
	 * @param {Object|Array} obj коллекция
	 * @param {String} m_name имя метода
	 * 
	 */
	E.call_all = function(obj, m_name) {
		var args = [];
		for(var i = 2; i &lt; arguments.length; i++) args[i-2] = arguments[i];
		for(var i in obj) {
			if(obj[i][m_name]) obj[i][m_name].apply(obj[i], args);
		}
	};
	
	
	
	/**
	 * Проверка, содержится ли элемент в коллекции
	 * 
	 * @name Ergo.includes
	 * @function
	 * @param {Array|Object} obj коллекция
	 * @param {Any} val значение
	 */
	E.includes = function(obj, val) {
		for(var i in obj)
			if(obj[i] == val) return true;
//		for(var i = 0; i &lt; arr.length; i++)
//			if(arr[i] == val) return true;
		return false;
	};
	
	E.contains = E.includes;
	E.is_include = E.includes;

	
	
	E.size = function(obj) {
		if($.isArray(obj)) return obj.length;

		var n = 0;
		for(var i in obj) n++;
		return n;
	};
	
	
	
	/**
	 * Удаление элемента из массива (массив уменьшает размерность)
	 * 
	 * @name Ergo.remove
	 * @function
	 * @param {Object} arr массив
	 * @param {Object} val удаляемый элемент
	 */
	
	//TODO в качестве значения может выступать критерий, а удаление может происходить как из массива, так и из хэша
	
	E.remove = function(arr, val) {
		var index = -1;
		for(var i = 0; i &lt; arr.length; i++) {
			if(arr[i] == val) {
				index = i;
				break;
			}
		}
		if(index != -1) arr.splice(index, 1);
		
		return (index != -1);
	};
	
	
	
	
})();
</pre>
        </article>
    </section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>
		on Fri Nov 14 2014 01:28:08 GMT+0400 (MSK) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>
